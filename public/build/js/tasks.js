!function(){!async function(){try{const e="/api/tasks?id="+c(),n=await fetch(e),s=await n.json();t=s.tasks,a()}catch(t){console.log(t)}}();let t=[],e=[];document.querySelector("#add-task").addEventListener("click",(function(){s()}));function n(n){const s=n.target.value;e=""!==s?t.filter(t=>t.status===s):[],a()}function a(){!function(){const t=document.querySelector("#tasks-list");for(;t.firstChild;)t.removeChild(t.firstChild)}(),function(){const e=t.filter(t=>"0"===t.status),n=document.querySelector("#pending"),a=document.querySelector("#complete");0===e.length?(n.disabled=!0,a.checked=!0):n.disabled=!1}(),function(){const e=t.filter(t=>"1"===t.status),n=document.querySelector("#pending"),a=document.querySelector("#complete");0===e.length?(n.checked=!0,a.disabled=!0):a.disabled=!1}();const n=e.length?e:t;if(0===n.length){const t=document.querySelector("#tasks-list"),e=document.createElement("LI");return e.textContent="There are no tasks",e.classList.add("no-tasks"),void t.appendChild(e)}const d={0:"Pending",1:"Complete"};n.forEach(n=>{const i=document.createElement("LI");i.dataset.taskId=n.id,i.classList.add("task");const l=document.createElement("P");l.textContent=n.name,l.ondblclick=function(){s(edit=!0,{...n})};const r=document.createElement("DIV");r.classList.add("options");const u=document.createElement("BUTTON");u.classList.add("task-status"),u.classList.add(""+d[n.status].toLowerCase()),u.textContent=d[n.status],u.dataset.taskStatus=n.status,u.ondblclick=function(){!function(t){const e="1"===t.status?"0":"1";t.status=e,o(t)}({...n})};const m=document.createElement("BUTTON");m.classList.add("delete-task"),m.dataset.taskId=n.id,m.textContent="Delete",m.ondblclick=function(){!function(n){Swal.fire({title:"Do you want to delete the task?",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(s=>{s.isConfirmed&&async function(n){const{status:s,id:o,name:d}=n,i=new FormData;i.append("id",o),i.append("name",d),i.append("status",s),i.append("projectId",c());try{const n="https://uptaskmvc.000webhostapp.com/api/task/delete",s=await fetch(n,{method:"POST",body:i});if((await s.json()).result){t=t.filter(t=>t.id!==o);const n=document.querySelector('input[name="filter"]:checked').value;n&&(e=t.filter(t=>t.status===n)),a()}}catch(t){console.log(t)}}(n)})}({...n})},r.appendChild(u),r.appendChild(m),i.appendChild(l),i.appendChild(r);document.querySelector("#tasks-list").appendChild(i)})}function s(n=!1,s={}){const d=document.createElement("DIV");d.classList.add("modal"),d.innerHTML=`\n            <form class="form new-task">\n                <legend>${n?"Edit task":"Add a new task"}</legend>\n                <div class="field">\n                    <label>Task Name</label>\n                    <input type="text" name="task" placeholder="${s.name?"Edit the name of the task":"Name of the new task"}" id="task" value="${s.name?s.name:""}"/>\n                </div>\n                <div class="options">\n                    <input type="submit" class="submit-new-task" value="${s.name?"Save Changes":"Add Task"}"/>\n                    <button type="button" class="close-modal">Cancel</button>\n                </div>\n            </form>\n        `,setTimeout(()=>{document.querySelector(".form").classList.add("animate")},100),d.addEventListener("click",(function(i){if(i.preventDefault(),i.target.classList.contains("close-modal")||i.target.classList.contains("modal")){document.querySelector(".form").classList.add("close"),setTimeout(()=>{d.remove()},500)}if(i.target.classList.contains("submit-new-task")){const d=document.querySelector("#task").value.trim();if(""===d)return void function(t,e,n){const a=document.querySelector(".alert");a&&a.remove();const s=document.createElement("DIV");s.classList.add("alert",e),s.textContent=t,n.parentElement.insertBefore(s,n)}("The name of the task is required","error",document.querySelector(".form .field"));n?(s.name=d,o(s)):async function(n){const s=new FormData;s.append("name",n),s.append("projectId",c());try{const o="https://uptaskmvc.000webhostapp.com/api/task",c=await fetch(o,{method:"POST",body:s}),d=await c.json();if("success"===d.type){const s=document.querySelector(".modal");setTimeout(()=>{s.remove()},300);const o={id:d.id,name:n,status:"0",projectId:d.projectId};t=[...t,o];const c=document.querySelector('input[name="filter"]:checked').value;c&&(e=t.filter(t=>t.status===c)),a()}}catch(t){console.log(t)}}(d)}})),document.querySelector("body").appendChild(d)}async function o(n){const{status:s,id:o,name:d}=n,i=new FormData;i.append("id",o),i.append("name",d),i.append("status",s),i.append("projectId",c());try{const n="https://uptaskmvc.000webhostapp.com/api/task/update",c=await fetch(n,{method:"POST",body:i});if("success"===(await c.json()).answer.type){const n=document.querySelector(".modal");n&&setTimeout(()=>{n.remove()},300),t=t.map(t=>(t.id===o&&(t.status=s,t.name=d),t));const c=document.querySelector('input[name="filter"]:checked').value;c&&(e=t.filter(t=>t.status===c)),a()}}catch(t){console.log(t)}}function c(){const t=new URLSearchParams(window.location.search);return Object.fromEntries(t.entries()).id}document.querySelectorAll("#filters input[type='radio']").forEach(t=>{t.addEventListener("input",n)})}();